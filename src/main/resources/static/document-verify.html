<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureDoc - 문서 검증</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Roboto+Mono:wght@400;500&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f1f5f9; color: #334155; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 3px; }
        .sidebar-item { border-right: 3px solid transparent; }
        .sidebar-item.active { background-color: #e2e8f0; border-right: 3px solid #3b82f6; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">

    <header class="bg-slate-800 text-white h-14 flex items-center justify-between px-6 shadow-md z-10">
        <div class="flex items-center gap-3">
            <div class="bg-blue-500 text-white w-8 h-8 rounded flex items-center justify-center font-bold shadow-lg">
                <i class="fas fa-file-contract"></i>
            </div>
            <span class="font-bold text-lg tracking-tight">SecureDoc <span class="font-light opacity-70">Enterprise</span></span>
        </div>
        <div class="flex items-center gap-4">
            <button onclick="history.back()" class="text-sm text-slate-300 hover:text-white transition">
                <i class="fas fa-arrow-left mr-1"></i> 목록으로
            </button>
            <span id="docTitle" class="text-sm font-light">문서 로딩 중...</span>
            <div id="userDisplay" class="w-8 h-8 bg-slate-600 rounded-full flex items-center justify-center text-xs cursor-pointer" title="로그아웃">
                VF
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden">

        <div class="w-2/3 bg-slate-200 border-r border-slate-300 flex flex-col overflow-hidden">
            <div class="h-10 bg-white border-b border-slate-200 flex items-center px-4 justify-between text-sm text-slate-600">
                <span class="font-medium">원문 PDF 뷰어</span>
                <div class="flex gap-3">
                    <button class="text-blue-600 hover:text-blue-800"><i class="fas fa-search-plus"></i></button>
                    <button class="text-blue-600 hover:text-blue-800"><i class="fas fa-search-minus"></i></button>
                    <button class="text-blue-600 hover:text-blue-800"><i class="fas fa-print"></i></button>
                </div>
            </div>
            <div class="flex-1 overflow-y-auto p-4 flex justify-center items-start">
                <div id="pdfViewer" class="w-full max-w-xl bg-white shadow-xl border border-slate-300" style="min-height: 1000px;">
                    <div class="p-8 flex items-center justify-center flex-col">
                        <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mb-4"></div>
                        <p class="text-slate-400 text-center">PDF 문서 로딩 중...</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="w-1/3 flex flex-col overflow-hidden p-4">
            <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center justify-between">
                <span>
                    <i class="fas fa-clipboard-check mr-2 text-yellow-500"></i> 검증 대기 데이터
                </span>
                <span id="confidenceBadge" class="px-3 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                    Confidence: --%
                </span>
            </h3>

            <div class="flex-1 overflow-y-auto space-y-4">

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1">문서 상태</label>
                    <div id="statusDisplay" class="w-full border border-slate-300 rounded px-3 py-2 text-sm bg-slate-50">
                        로딩 중...
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1">계약자 A (공급자)</label>
                    <div class="flex items-center border border-slate-300 rounded bg-white px-3 focus-within:border-blue-500">
                        <input id="contractorA" type="text" class="w-full text-sm py-2 bg-transparent focus:outline-none text-slate-700" placeholder="계약자 A">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1">계약자 B (수요자)</label>
                    <div class="flex items-center border border-slate-300 rounded bg-white px-3 focus-within:border-blue-500">
                        <input id="contractorB" type="text" class="w-full text-sm py-2 bg-transparent focus:outline-none text-slate-700" placeholder="계약자 B">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1 flex justify-between items-center">
                        총 계약 금액
                        <i id="amountWarning" class="fas fa-exclamation-triangle text-red-500 ml-1 text-sm hidden" title="추출 신뢰도 낮음"></i>
                    </label>
                    <div id="amountContainer" class="flex items-center border border-slate-300 rounded bg-white px-3 overflow-hidden focus-within:border-blue-500">
                        <span class="text-slate-500 text-sm mr-2">₩</span>
                        <input id="contractAmount" type="text" class="w-full text-sm py-2 bg-transparent focus:outline-none font-bold text-slate-700 text-right" placeholder="계약 금액">
                    </div>
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1">계약 시작일</label>
                    <input id="startDate" type="date" class="w-full border border-slate-300 rounded px-3 py-2 text-sm focus:border-blue-500">
                </div>

                <div>
                    <label class="block text-xs font-bold text-slate-500 mb-1">계약 종료일</label>
                    <input id="endDate" type="date" class="w-full border border-slate-300 rounded px-3 py-2 text-sm focus:border-blue-500">
                </div>

                <div class="border-t border-slate-200 pt-4">
                    <label class="block text-xs font-bold text-slate-500 mb-1">업로드일</label>
                    <div id="uploadDate" class="w-full border border-slate-300 rounded px-3 py-2 text-sm bg-slate-50 text-slate-600">
                        -
                    </div>
                </div>

                <div class="text-sm pt-4">
                    <label class="inline-flex items-center">
                        <input id="verifyCheckbox" type="checkbox" class="form-checkbox text-green-600 rounded">
                        <span class="ml-2 text-slate-600">이상이 없음을 확인합니다.</span>
                    </label>
                </div>

            </div>

            <div class="mt-4 pt-4 border-t border-slate-200 flex gap-3">
                <button onclick="requestReExtraction()" class="flex-1 py-3 bg-red-600 text-white font-semibold rounded-lg shadow-md hover:bg-red-700 transition">
                    <i class="fas fa-times-circle mr-2"></i> 오류/재추출 요청
                </button>
                <button onclick="finalizeVerification()" class="flex-1 py-3 bg-green-600 text-white font-semibold rounded-lg shadow-md hover:bg-green-700 transition">
                    <i class="fas fa-check-circle mr-2"></i> 최종 검증 완료
                </button>
            </div>
        </div>

    </div>

    <script src="/document-verify.js"></script>
</body>
</html>
